<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd"
                   logicalFilePath="db/changelog/0000999_data.xml">
    <changeSet author="cxbox" id="APP_SEQ SEQUENCE">
        <createSequence maxValue="9223372036854775807" sequenceName="APP_SEQ" startValue="1100000"/>
    </changeSet>
    <changeSet author="cxbox" id="META_SEQ SEQUENCE">
        <createSequence maxValue="9223372036854775807" sequenceName="META_SEQ" startValue="1100000" incrementBy="100"/>
    </changeSet>
    <changeSet author="cxbox" id="APP_BATCH_SEQ SEQUENCE">
        <createSequence maxValue="9223372036854775807" sequenceName="APP_BATCH_SEQ" startValue="2000000000"
                        incrementBy="100"/>
    </changeSet>

    <changeSet author="developer" id="2025-04-15-01">
        <preConditions onFail="MARK_RAN">
            <dbms type="postgres"/>
        </preConditions>
        <comment>Create functional index on created_date. Always add it if you use TIMESTAMP field as filterable/sortable 'time' widget field with TimeValueProvider, because it will generate 'where cast(created_date as time) > ?' condition using this index</comment>
        <sql>
            CREATE INDEX idx_apple_created_date_time2 ON apple ((created_date::time));
        </sql>
    </changeSet>
    <changeSet author="oracle" id="2025-04-15-01">
        <preConditions onFail="MARK_RAN">
            <dbms type="oracle"/>
        </preConditions>
        <sql>
            CREATE INDEX idx_apple_created_date_time ON apple (TO_CHAR(created_date, 'HH24:MI:SS'));
        </sql>
    </changeSet>
</databaseChangeLog>